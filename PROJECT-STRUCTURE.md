# WordPress Docker Project Structure

Complete overview of the project's files and directories.

## ğŸ“‚ Root Directory

```
wp-docker/
â”œâ”€â”€ .env                         # Environment variables (DB passwords, ports)
â”œâ”€â”€ .env.example                 # Template for .env file
â”œâ”€â”€ .gitignore                   # Git exclusions
â”œâ”€â”€ docker-compose.yml           # Container orchestration
â”‚
â”œâ”€â”€ new-site.sh                  # â­ Site provisioning script
â”œâ”€â”€ install-mkcert.sh            # mkcert installation helper
â”œâ”€â”€ manage-sites.sh              # Site management utilities
â”‚
â”œâ”€â”€ README.md                    # Main documentation
â”œâ”€â”€ QUICK-SETUP.md               # Fast setup guide (< 5 minutes)
â”œâ”€â”€ SETUP-COMPLETE.md            # Post-setup information
â”œâ”€â”€ ARCHITECTURE.md              # Technical architecture
â”œâ”€â”€ UPDATE-SUMMARY.md            # Recent updates summary
â”œâ”€â”€ PROJECT-STRUCTURE.md         # This file
â”œâ”€â”€ Makefile                     # Make commands for common tasks
â””â”€â”€ HOSTS.txt                    # Hosts file entries reference
```

## ğŸ“ Directory Structure

### /nginx - Nginx Configuration

```
nginx/
â”œâ”€â”€ .gitkeep                     # Directory purpose documentation
â”œâ”€â”€ nginx.conf                   # Main Nginx configuration
â”‚                                # - Loads sites-enabled/*.conf
â”‚                                # - Global settings
â”‚
â”œâ”€â”€ sites-available/             # All site configurations
â”‚   â”œâ”€â”€ .gitkeep                 # Directory purpose documentation
â”‚   â”œâ”€â”€ site.conf.template       # Template for new sites
â”‚   â”œâ”€â”€ default.conf             # Default/catch-all server block
â”‚   â””â”€â”€ *.test.conf              # Individual site configs
â”‚                                # Example: tabdeal-wp-academy.conf
â”‚
â”œâ”€â”€ sites-enabled/               # Enabled sites (symlinks)
â”‚   â”œâ”€â”€ .gitkeep                 # Directory purpose documentation
â”‚   â””â”€â”€ *.test.conf              # Symlinks to sites-available/
â”‚                                # Only configs here are loaded
â”‚
â””â”€â”€ ssl/                         # SSL certificates
    â”œâ”€â”€ .gitkeep                 # Directory purpose documentation
    â”œâ”€â”€ certs/                   # SSL certificate files
    â”‚   â”œâ”€â”€ .gitkeep             # Directory purpose + security note
    â”‚   â””â”€â”€ *.test.pem           # Generated by mkcert
    â”‚
    â””â”€â”€ private/                 # Private keys (âš ï¸ NEVER commit!)
        â”œâ”€â”€ .gitkeep             # Directory purpose + security warning
        â””â”€â”€ *.test-key.pem       # Generated by mkcert
```

**Mounted to:** `/etc/nginx/` in nginx container

### /sites - WordPress Installations

```
sites/
â”œâ”€â”€ .gitkeep                     # Directory purpose documentation
â”œâ”€â”€ .htaccess                    # WordPress .htaccess (if needed)
â”œâ”€â”€ html/                        # Optional default site
â”‚
â””â”€â”€ [site-name]/                 # Each WordPress installation
    â”œâ”€â”€ wp-admin/
    â”œâ”€â”€ wp-content/
    â”‚   â”œâ”€â”€ themes/
    â”‚   â”œâ”€â”€ plugins/
    â”‚   â””â”€â”€ uploads/
    â”œâ”€â”€ wp-includes/
    â”œâ”€â”€ wp-config.php
    â””â”€â”€ index.php
```

**Mounted to:** `/var/www/` in both nginx and php containers

**Example:**
- `sites/blog/` â†’ accessed via `https://blog.test`

### /logs - Application Logs

```
logs/
â”œâ”€â”€ .gitkeep                     # Directory purpose documentation
â””â”€â”€ nginx/                       # Nginx access and error logs
    â”œâ”€â”€ access.log               # Global access log
    â”œâ”€â”€ error.log                # Global error log
    â””â”€â”€ [sitename]_*.log         # Per-site logs
```

**Mounted to:** `/var/log/nginx/` in nginx container

## ğŸ”§ Configuration Files

### docker-compose.yml

Defines 4 services:

| Service    | Container Name | Image                 | Ports           | Purpose                     |
|------------|----------------|-----------------------|-----------------|-----------------------------|
| nginx      | wp-nginx       | nginx:alpine          | 80, 443         | Web server, SSL termination |
| php        | wp-php         | wordpress:php8.2-fpm  | 9000 (internal) | PHP processor               |
| mysql      | wp-mysql       | mysql:8.0             | 3306 (exposed)  | Database server             |
| phpmyadmin | wp-phpmyadmin  | phpmyadmin/phpmyadmin | 8080            | DB management UI            |

### .env File

Contains sensitive configuration:

```env
# MySQL Configuration
DB_ROOT_PASSWORD=your_secure_password

# PhpMyAdmin
PMA_HOST=mysql
PMA_PORT=3306

# Ports (optional overrides)
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
MYSQL_PORT=3306
PMA_PORT=8080
```

## ğŸš€ Scripts

### new-site.sh (Recommended)

Quick site provisioning:
1. Creates Nginx config from template
2. Downloads WordPress
3. Generates SSL certificate
4. Optionally adds to /etc/hosts
5. Optionally starts Docker

**Usage:**
```bash
./new-site.sh
# Enter domain: mysite.test
```

### install-mkcert.sh

Installs mkcert for SSL certificates:
```bash
./install-mkcert.sh
```

### manage-sites.sh

Site management utilities for listing, enabling, disabling, and removing sites.

## ğŸ“ Documentation Files

| File                 | Purpose                                      |
|----------------------|----------------------------------------------|
| README.md            | Main documentation with complete setup guide |
| QUICK-SETUP.md       | Fast setup guide (get running in 5 minutes)  |
| SETUP-COMPLETE.md    | Information about the project structure      |
| ARCHITECTURE.md      | Technical architecture and request flow      |
| UPDATE-SUMMARY.md    | Summary of recent changes                    |
| PROJECT-STRUCTURE.md | This file - complete structure reference     |

## ğŸ” .gitignore Strategy

**Ignored:**
- `.env` (contains passwords)
- `sites/*/` (WordPress files)
- `logs/**/*.log` (log files)
- `nginx/ssl/certs/*.pem` (SSL certificates)
- `nginx/ssl/private/*.pem` (private keys)

**Tracked:**
- All `.gitkeep` files (preserve directory structure)
- Templates and configuration examples
- Documentation
- Scripts

## ğŸ¯ Workflow Summary

### Adding a New Site

1. **Create config:** `nginx/sites-available/newsite.test.conf`
2. **Download WordPress:** `sites/newsite/`
3. **Generate SSL:** `nginx/ssl/certs/` + `nginx/ssl/private/`
4. **Add to hosts:** `/etc/hosts` â†’ `127.0.0.1 newsite.test`
5. **Start/reload:** `docker-compose up -d`

### File Locations for New Site "example.test"

```
nginx/sites-available/example.test.conf  # Nginx configuration
nginx/sites-enabled/example.test.conf    # Symlink to above
nginx/ssl/certs/example.test.pem         # SSL certificate
nginx/ssl/private/example.test-key.pem   # SSL private key
sites/example/                           # WordPress files
logs/nginx/example_access.log            # Access log
logs/nginx/example_error.log             # Error log
```

## ğŸ” Finding Things

| Looking for        | Location                                   |
|--------------------|--------------------------------------------|
| Nginx site configs | `nginx/sites-available/`                   |
| Enabled sites      | `nginx/sites-enabled/`                     |
| SSL certificates   | `nginx/ssl/certs/`                         |
| WordPress files    | `sites/[sitename]/`                        |
| Database password  | `.env` file                                |
| Nginx logs         | `logs/nginx/`                              |
| Main Nginx config  | `nginx/nginx.conf`                         |
| Site template      | `nginx/sites-available/site.conf.template` |

## ğŸ“Š Size Considerations

**Excluded from git (large):**
- WordPress core files (~50MB per site)
- Database volumes (varies)
- Log files (grows over time)
- User uploads in `wp-content/uploads/`

**Included in git (small):**
- Configuration files
- Documentation
- Scripts
- Templates
- Directory structure markers (.gitkeep)

---

**Total directories:** ~10-15 (depending on number of sites)
**Total tracked files:** ~30-40 (configuration and docs)
**Total excluded:** WordPress installations, databases, logs, certs
